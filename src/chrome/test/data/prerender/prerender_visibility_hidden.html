<html>
<!-- 
This test checks the visibility API when a prerendered page is visited without
being displayed.
-->
<head>
<title>Prerender Visibility Hidden</title>

<script src="prerender_visibility_shared.js"></script>

<script>
// Checks that no visibility change events have occurred, current visibility
// state is "prerender", and visibility state while the page was loading was
// also "prerender".
function DidPrerenderPass() {
  return visibilityStates.length == 1 &&
         hiddenValues.length == 1 &&
         visibilityStates[0] == 'prerender' &&
         hiddenValues[0] == true &&
         document.webkitVisibilityState == 'prerender' &&
         document.webkitHidden == true;
}

// Checks one and only one visibility change even occurred, and resulted in a
// hidden state, and that current state is also hidden.
function DidDisplayPass() {
  return visibilityStates.length == 2 &&
         hiddenValues.length == 2 &&
         visibilityStates[1] == 'hidden' &&
         hiddenValues[1] == true &&
         document.webkitVisibilityState == 'hidden' &&
         document.webkitHidden == true;
}
</script>

</head>
<body></body>
</html>
